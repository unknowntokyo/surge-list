#!name=Rewrite & Script
#!desc=URL重定向 & 微信去公众号文章广告 & Q-Search & 京东比价

[Host]
# > Companies
*.126.com = server:https://1.12.12.12/dns-query
*.126.net = server:https://1.12.12.12/dns-query
*.127.net = server:https://1.12.12.12/dns-query
*.163.com = server:https://1.12.12.12/dns-query
*.360buyimg.com = server:syslib
*.1688.com = server:https://223.5.5.5/dns-query
*.acg.tv = server:syslib
*.aliapp.com = server:https://223.5.5.5/dns-query
*.aliapp.org = server:https://223.5.5.5/dns-query
*.alibaba.cn = server:https://223.5.5.5/dns-query
*.alibaba.com.cn = server:https://223.5.5.5/dns-query
*.alibabausercontent.com = server:https://223.5.5.5/dns-query
*.alicdn.com = server:https://223.5.5.5/dns-query
*.alipay-eco.com = server:https://223.5.5.5/dns-query
*.alipay.com = server:https://223.5.5.5/dns-query
*.alipay.com.cn = server:https://223.5.5.5/dns-query
*.alipaydns.com = server:https://223.5.5.5/dns-query
*.alipayeshop.com = server:https://223.5.5.5/dns-query
*.alipaylog.com = server:https://223.5.5.5/dns-query
*.alipayobjects.com = server:https://223.5.5.5/dns-query
*.aliyun.* = server:https://223.5.5.5/dns-query
*.aliyuncdn.* = server:https://223.5.5.5/dns-query
*.aliyuncs.com = server:https://223.5.5.5/dns-query
*.aliyunddos????.com = server:https://223.5.5.5/dns-query
*.aliyundrive.com = server:https://223.5.5.5/dns-query
*.aliyundunwaf.com = server:https://223.5.5.5/dns-query
*.baidu = server:https://223.5.5.5/dns-query
*.baidu.com = server:https://223.5.5.5/dns-query
*.baidubce.* = server:https://223.5.5.5/dns-query
*.baidupcs.* = server:https://223.5.5.5/dns-query
*.baiduyuncdn.* = server:https://223.5.5.5/dns-query
*.baiduyundns.* = server:https://223.5.5.5/dns-query
*.bcebos.com = server:https://223.5.5.5/dns-query
*.bcedns.* = server:https://223.5.5.5/dns-query
*.bcehost.com = server:https://223.5.5.5/dns-query
*.bcehosts.com = server:https://223.5.5.5/dns-query
*.bceimg.com = server:https://223.5.5.5/dns-query
*.bcevod.com = server:https://223.5.5.5/dns-query
*.bdimg.com = server:https://223.5.5.5/dns-query
*.bdstatic.com = server:https://223.5.5.5/dns-query
*.bdycdn.* = server:https://223.5.5.5/dns-query
*.bdydns.* = server:https://223.5.5.5/dns-query
*.bdysite.com = server:https://223.5.5.5/dns-query
*.bdysites.com = server:https://223.5.5.5/dns-query
*.biliapi.com = server:syslib
*.biliapi.net = server:syslib
*.bilibili.com = server:syslib
*.bilivideo.cn = server:syslib
*.bilivideo.com = server:syslib
*.cdn-go.cn = server:https://1.12.12.12/dns-query
*.china.alibaba.com = server:https://223.5.5.5/dns-query
*.dwz.cn = server:https://223.5.5.5/dns-query
*.gtimg.cn = server:https://1.12.12.12/dns-query
*.hdslb.com = server:syslib
*.hdslb.net = server:syslib
*.idqqimg.com = server:https://1.12.12.12/dns-query
*.jcloudstatic.com = server:syslib
*.jcloudstatic.net = server:syslib
*.jd.com = server:syslib
*.jdcloud.com = server:syslib
*.jdgslb.com = server:syslib
*.mi.com = server:https://1.12.12.12/dns-query
*.mmstat.com = server:https://223.5.5.5/dns-query
*.myqcloud.com = server:https://1.12.12.12/dns-query
*.qcloud.com = server:https://1.12.12.12/dns-query
*.qcloudcdn.cn = server:https://1.12.12.12/dns-query
*.qcloudcdn.com = server:https://1.12.12.12/dns-query
*.qcloudcjgj.com = server:https://1.12.12.12/dns-query
*.qcloudcos.com = server:https://1.12.12.12/dns-query
*.qcloudimg.com = server:https://1.12.12.12/dns-query
*.qcloudwzgj.com = server:https://1.12.12.12/dns-query
*.qcloudzygj.com = server:https://1.12.12.12/dns-query
*.qlogo.cn = server:https://1.12.12.12/dns-query
*.qpic.cn = server:https://1.12.12.12/dns-query
*.qq.com = server:https://1.12.12.12/dns-query
*.servicewechat.com = server:https://1.12.12.12/dns-query
*.smtcdns.com = server:https://1.12.12.12/dns-query
*.smtcdns.net = server:https://1.12.12.12/dns-query
*.taobao.com = server:https://223.5.5.5/dns-query
*.tb.cn = server:https://223.5.5.5/dns-query
*.tbcache.com = server:https://223.5.5.5/dns-query
*.tencent-cloud.net = server:https://1.12.12.12/dns-query
*.tencent.com = server:https://1.12.12.12/dns-query
*.tencentcloud-aiot.com = server:https://1.12.12.12/dns-query
*.tencentcloudapi.com = server:https://1.12.12.12/dns-query
*.tencentcloudcr.com = server:https://1.12.12.12/dns-query
*.tencentcloudmarket.com = server:https://1.12.12.12/dns-query
*.tmall.com = server:https://223.5.5.5/dns-query
*.url.cn = server:https://1.12.12.12/dns-query
*.wechat.com = server:https://1.12.12.12/dns-query
*.weixin.com = server:https://1.12.12.12/dns-query
*.weixin.qq.com = server:https://1.12.12.12/dns-query
*.weixinbridge.com = server:https://1.12.12.12/dns-query
*.weiyun.com = server:https://1.12.12.12/dns-query
*.wx.qq.com = server:https://1.12.12.12/dns-query
*.xiaomi.com = server:https://1.12.12.12/dns-query

# > Router
amplifi.lan = server:syslib
falogin.cn = server:syslib
dlinkrouter.local = server:syslib
linksyse7350.local = server:syslib
linksyssmartwifi.com = server:syslib
mediarouter.home = server:syslib
miwifi.com = server:syslib
my.router = server:syslib
myrouter.local = server:syslib
orbilogin.com = server:syslib
router.asus.com = server:syslib
routerlogin.com = server:syslib
routerlogin.net = server:syslib
router.synology.com = server:syslib
sila.razer.com = server:syslib
tplogin.cn = server:syslib
unifi.ui.com = server:syslib

[URL Rewrite]
^https?://(www.)?(g|google).cn https://www.google.co.jp 302

^https?://(www.)?google.cn/search https://www.google.co.jp/search 302

^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

# > bd xxx (百度)
^https:\/\/duckduckgo.com\/\?q=bd(\+|%20)([^&]+).+ https://www.baidu.com/s?wd=$2 302

# > zh xxx (知乎)
^https:\/\/duckduckgo.com\/\?q=zh(\+|%20)([^&]+).+ https://www.zhihu.com/search?q=$2 302

# > ccn (App Store 临时切换至国区)
^https:\/\/duckduckgo.com\/\?q=ccn&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143465&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=cn&urlDesc= 302

# > uus (App Store 临时切换至美区)
^https:\/\/duckduckgo.com\/\?q=uus&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143441&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=us&urlDesc= 302

# > wk xxx (Wikipedia 中文)
^https:\/\/duckduckgo.com\/\?q=wk(\+|%20)([^&]+).+ https://zh.wikipedia.org/wiki/$2 302

# > xxx （无指令默认为 Google搜索）
^https:\/\/duckduckgo.com\/\?q=(?!dl(c|e|j)(\+|%20))([^&]+).+ https://www.google.co.jp/search?q=$3&num=30 302

[MITM]
hostname = %APPEND% acs.m.taobao.com,api.m.jd.com,bdsp-x.jd.com,guide-acs.m.taobao.com,duckduckgo.com,mp.weixin.qq.com,ms.jr.jd.com,www.google.cn

[Script]
http-response ^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig) requires-body=1,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/jd_price.js

http-response ^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/File/Wechat.js